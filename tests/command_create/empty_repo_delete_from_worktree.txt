+ test_init_git
+ git init --quiet
+ git switch --quiet -c main
+ git status
On branch main

No commits yet

nothing to commit (create/copy files and use "git add" to track)
+ echo foo
+ echo bar
+ git add b.txt
+ GIT_DRAFT_TEST_RANDOM_6CHAR=abcdef
+ /home/wolf/src/git-draft/git-draft create --from-index --delete-from-worktree
created new draft main-abcdef
+ /home/wolf/src/git-draft/git-draft show main-abcdef
commit ee14bb9bf97f090ea2d71d2c7f1514cd33a26dd1
Author: test <test@test>
Date:   Thu Jan 1 00:00:00 1970 +0000

    Draft-on: refs/heads/main

diff --git a/b.txt b/b.txt
new file mode 100644
index 0000000..5716ca5
--- /dev/null
+++ b/b.txt
@@ -0,0 +1 @@
+bar
+ git status
On branch main

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	a.txt

nothing added to commit but untracked files present (use "git add" to track)
+ finish
+ set +x
